---
title: 一些关于数组操作的技巧和方法
date: 2018-03-28 22:37:47
tags: [JavaScript,ES6]
---

> 一些数组操作方法和技巧的总结
> 1. 创建顺序规律数组
> 2. 多维数组展开


<!--more-->
### 创建一个按照下标/顺序赋值的数组 
在实际的应用中，有时会需要迅速生成一个按照顺序排列的数组(日期等)，利用ES6新增的keys遍历可以很方便的生成。

1. 当年月份
```
Array.from(Array(12).keys(), x => `2018年${x + 1}月`);

[...Array(12).keys()].map(function(e){
	return `2018年${e + 1}月`;
})


//["2018年1月", "2018年2月", "2018年3月", ...]
```

2. 生成[[1,1,1],[2,2,2],...[n,n,n]]
```
function generateArr (n) {
    return Array.from(Array(n).keys(), x => Array(3).fill(x + 1));
}
```

这里主要用到的是Array的keys和Array.from以及扩展运算符...。
- 首先从keys说起，keys是ES6提供的一个新对象，用于遍历数组,会返回一个遍历器对象(Iterator)，值为对键名的遍历，而在数组上的效果就是有序返回所有下标值。
- 而Array.from和扩展运算符则是可以将实现了Iterator接口的对象转换为真正的数组,另外Array.from还可以将类数组对象转换为真正的数组，例如arguments。
- Array.from还可以接受第二个参数，对遍历的值进行操作，获得类似map方法的效果。
- fill(x)方法的作用是使用给定值填充数组，还可以接受其他两个参数来表示起始位置。
```
['a', 'b', 'c'].fill(7, 1, 2) //1,2为起始位置
```

### 多维数组转换为一维数组
在使用数组数据时，有时需要合并数组内的数组，最终得到一个一维数组，从而进行下一步的操作，在进行转换时，一般区分为二维数组和多维数组的情况：

1. 二维数组
```
let arr = [[1,2,3],[5,6,7]]
let flat_arr = [].concat.apply([], arr);
```

arr作为apply方法的第二个参数，本身是一个数组，数组中的每一个子数组元素会被作为参数依次传入到concat中，效果等同于[].concat([1,2,3],[5,6,7])。



2. 多维数组
```
function arrayFlatten(arr) {
    let result = []; 
    let stack = arr; 
    while (stack.length !== 0) { 
        let val = stack.pop(); 
        if (Array.isArray(val)) { 
            stack = stack.concat(val); 
        } else {
            result.unshift(val); 
        }
    }
    return result;
}
```
利用apply和concat的写法只适用于二维数组，多维数组则需要利用循环判断将多维数组逐步展开。